pipeline {
  agent any

  tools {
    nodejs 'NodeJS'  // Make sure 'NodeJS' matches the name of NodeJS installation in Jenkins Global Tool Configuration
  }

  stages {
    stage('Check Frontend Directory') {
      steps {
        bat 'dir'                        // Lists workspace root contents
        dir('my-frontend') {
          bat 'dir'                     // Lists contents of the frontend folder
        }
      }
    }

    stage('Frontend Build') {
      steps {
        dir('my-frontend') {
          bat 'npm install'             // Runs npm install in frontend folder
          bat 'npm run build'           // Builds frontend production assets
        }
      }
    }

    stage('Backend Build & Test') {
      steps {
        dir('my-backend') {
          bat '''
            python -m venv venv
            call venv\\Scripts\\activate
            pip install -r requirements.txt
            REM Add more backend commands here
	    REM pytest
          '''
        }
      }
    }

    stage('Deploy') {
      steps {
        echo 'Deploy your built frontend and backend here (e.g., copy files, restart services)'
        // Add actual deploy commands/scripts here if needed
      }
    }
  }
}
