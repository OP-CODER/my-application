pipeline {
  agent any

  tools {
    nodejs 'NodeJS'
  }

  stages {
    stage('Check Frontend Directory') {
      steps {
        bat 'dir'
        dir('my-frontend') {
          bat 'dir'
        }
      }
    }

    stage('Frontend Build') {
      steps {
        dir('my-frontend') {
          bat 'npm install'
          bat 'npm run build'
        }
      }
    }

    stage('Backend Build & Test') {
      steps {
        dir('my-backend') {
          bat '''
            python -m venv venv
            call venv\\Scripts\\activate
            pip install -r requirements.txt
            pytest
          '''
        }
      }
    }

    stage('Deploy') {
      steps {
        echo 'Deploy your built frontend and backend here (e.g., copy files, restart services)'
        // Add actual deploy commands/scripts here if needed
      }
    }
  }
}
